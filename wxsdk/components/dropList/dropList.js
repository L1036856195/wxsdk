import common from '../../common.js'; Component({ properties: { tabTxt: { type: Object, value: {} }, }, data: { searchParamText: [], searchParamId: [], }, ready() { var tabTxt = this.data.tabTxt; var searchParamText = this.data.searchParamText; var searchParamId = this.data.searchParamId; if (common.isOwnEmpty(tabTxt)) { console.error('下拉列表参数不能为空') } else { for (var i = 0; i < tabTxt.length; i++) { searchParamText.push(common.Trim(tabTxt[i]['text'])); for (var j = 0; j < tabTxt[i]['child'].length; j++) { if (common.Trim(tabTxt[i]['text']) == common.Trim(tabTxt[i]['child'][j]['text'])) { searchParamId.push(tabTxt[i]['child'][j]['id']) } } } } this.setData({ searchParamText, searchParamId }) }, methods: { filterTab: function (e) { var that = this; var data = JSON.parse(JSON.stringify(that.data.tabTxt)); var index = e.currentTarget.dataset.index; var newTabTxt = data.map(function (e) { e.active = false; return e }); newTabTxt[index].active = !that.data.tabTxt[index].active; this.setData({ tabTxt: data }) }, filterTabChild: function (e) { var that = this; var index = e.currentTarget.dataset.index; var data = JSON.parse(JSON.stringify(that.data.tabTxt)); if (typeof (e.target.dataset.id) == 'undefined' || e.target.dataset.id === '') { data[index].active = !that.data.tabTxt[index].active } else { data[index].type = e.target.dataset.id; data[index].active = !that.data.tabTxt[index].active; data[index].text = e.target.dataset.txt; that.data.searchParamText[index] = data[index].text; that.data.searchParamId[index] = data[index].type } that.setData({ tabTxt: data, });var returnData = {}; returnData['searchParamId'] = that.data.searchParamId; returnData['searchParamText'] = that.data.searchParamText; this.triggerEvent('getList', returnData) } } })